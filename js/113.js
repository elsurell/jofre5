(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[113],{40232:(e,t,i)=>{"use strict";var s;function n(e){const t=new Date;t.setHours(0,0,0,0),e.setHours(0,0,0,0);const i=(t.getTime()-e.getTime())/864e5;if(0===i)return s.TODAY;if(1===i)return s.YESTERDAY;if(i<7)return s.THIS_WEEK;const n=Math.floor(i/7);return 1===n?s.ONE_WEEK_AGO:2===n?s.TWO_WEEKS_AGO:3===n?s.THREE_WEEKS_AGO:s.OLDER}i.d(t,{Z:()=>s,f:()=>n}),function(e){e.TODAY="TODAY",e.YESTERDAY="YESTERDAY",e.THIS_WEEK="THIS_WEEK",e.ONE_WEEK_AGO="ONE_WEEK_AGO",e.TWO_WEEKS_AGO="TWO_WEEKS_AGO",e.THREE_WEEKS_AGO="THREE_WEEKS_AGO",e.OLDER="OLDER"}(s||(s={}))},95142:(e,t,i)=>{"use strict";i.d(t,{Y:()=>r});var s=i(63926),n=i(42141);class r extends n.V{constructor(){super(),this.name="cursor",this.opacity=new s.z(0),this.texture=null}}},70102:(e,t,i)=>{"use strict";var s;i.d(t,{L:()=>s}),function(e){e[e.Reticle=0]="Reticle",e[e.GridPlane=1]="GridPlane"}(s||(s={}))},92394:(e,t,i)=>{"use strict";i.d(t,{C:()=>l});var s=i(85893),n=i(67294),r=i(38772),a=i(94184),o=i.n(a),c=function(e,t,i,s){var n,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let l=class extends n.Component{constructor(e){super(e)}render(){const{iconClass:e,label:t,badgeStyle:i,onClick:n,className:r,imageUrl:a}=this.props;return(0,s.jsxs)("span",Object.assign({className:o()("badge",r,{clickable:!!n}),style:i,onClick:n},{children:[e&&(0,s.jsx)("span",{className:`icon badge-icon ${e}`}),t&&(0,s.jsx)("span",Object.assign({className:"badge-label"},{children:t})),a&&(0,s.jsx)("span",Object.assign({className:"badge-img"},{children:(0,s.jsx)("img",{src:a})}))]}))}};l=c([r.Z,d("design:paramtypes",[Object])],l)},51201:(e,t,i)=>{"use strict";i.d(t,{Y:()=>a});var s=i(81396),n=i(91435),r=i(12241);class a extends s.RawShaderMaterial{constructor(e,t,i,a=r.V9.lineSelected){super(),this.parameters=e,this.hoverTexture=t,this.defaultTexture=i,this.selectedWidth=a,this.type="LineMaterial",this.isLineMaterial=!0,this.defaultWidth=r.V9.lineDefault,this.setValues({uniforms:s.UniformsUtils.clone(n.T.line.uniforms),vertexShader:n.T.line.vertexShader,fragmentShader:n.T.line.fragmentShader,transparent:!0,depthWrite:!1,depthTest:!0,opacity:1}),this.setValues(e),i&&(this.mask=i),this.defaultWidth=e&&e.linewidth?e.linewidth:r.V9.lineDefault}updateSelected(e){const t=e?this.hoverTexture:this.defaultTexture;t&&this.mask!==t&&(this.mask=t,e?this.setLinewidth(this.selectedWidth):this.setLinewidth(this.defaultWidth))}setLinewidth(e){this.uniforms.linewidth||(this.uniforms=s.UniformsUtils.clone(n.T.line.uniforms)),this.getLinewidth()!==e&&(this.uniforms.linewidth.value=e)}getLinewidth(){return this.uniforms.linewidth.value}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}getOpacity(){return this.uniforms.opacity.value}setOpacity(e){this.uniforms||(this.uniforms=s.UniformsUtils.clone(n.T.line.uniforms)),this.getOpacity()!==e&&(this.uniforms.opacity.value=e)}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}set dashed(e){e?this.defines.USE_DASH="":delete this.defines.USE_DASH,this.needsUpdate=!0}get dashed(){return"USE_DASH"in this.defines}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value=e}set mask(e){this.uniforms.mask.value!==e&&(e?this.defines.USE_MASK="":delete this.defines.USE_MASK,this.uniforms.mask.value=e,this.needsUpdate=!0)}get mask(){return this.uniforms.mask.value}copy(e){return s.RawShaderMaterial.prototype.copy.call(this,e),this.parameters=e.parameters,this.color.copy(e.color),this.defaultWidth=e.defaultWidth,this.setLinewidth(e.getLinewidth()),this.resolution.copy(e.resolution),this.defaultTexture=e.defaultTexture,this.hoverTexture=e.hoverTexture,this.mask=e.mask,this.setOpacity(e.getOpacity()),this.dashed=e.dashed,this.dashScale=e.dashScale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}},91435:(e,t,i)=>{"use strict";i.d(t,{T:()=>m});var s=i(81396),n=i(44850),r=i(44724),a=i.n(r),o=i(7188),c=i.n(o),d=i(52059),l=i.n(d),h=i(75215),u=i.n(h),f=i(56449),p=i.n(f);const m={endpoint:{uniforms:{opacity:{type:"f",value:1},color:{type:"c",value:new s.Color},bg:{type:"t",value:null}},vertexShader:n.Z.basicTextured.vertexShader,fragmentShader:a()},line:{uniforms:s.UniformsUtils.merge([s.UniformsLib.common,s.UniformsLib.fog,{linewidth:{value:4},resolution:{value:new s.Vector2(0,0)},dashScale:{value:1},dashSize:{value:.025},gapSize:{value:.05},mask:{value:null}}]),vertexShader:c(),fragmentShader:l()},screenline:{uniforms:{lineWidth:{value:1},screenSize:{value:new s.Vector2(0,0)},dashed:{value:0},dashSize:{value:1},gapSize:{value:1},antialiasWidth:{value:1},color:{value:new s.Color(1,0,0)},globalOpacity:{value:1},start:{value:new s.Vector3},end:{value:new s.Vector3},cameraPos:{value:new s.Vector3}},vertexShader:u(),fragmentShader:p()}}},12241:(e,t,i)=>{"use strict";i.d(t,{Ey:()=>r,V9:()=>n,g4:()=>a,iV:()=>s});const s={FADE_DURATION:100,LABEL_HIDDEN_OPACITY:.15,DEPTH_WRITE_THRESHOD:.15,ALIGN_LABELS:!1,LABEL_SIZING:.14,LABEL_NDC_SCALEFACTOR:.5,LABEL_ASPECT_SCALEFACTOR:.035,OFFSET_TOWARDS_CAMERA:.25,HIDE_LABELS:!1},n={dottedLineDefault:2,lineDefault:6,lineSelected:6,endpointDefault:2.5,endpointSelected:3.75},r=.01,a=5},28438:(e,t,i)=>{"use strict";i.d(t,{g:()=>d});var s=i(81396),n=i(63511),r=i(25565),a=i(49940),o=i(72803),c=i(56620);class d extends a.S{constructor(e,t,i=n.o.ALL){super(),this._opacity=1,this._chunks=[],this.size=new s.Vector3,this.center=new s.Vector3,this.built=!1,this.layers.mask=i.mask,this.name=`RoomMesh:${e}-${t}`,this.meshGroup=e,this.meshSubgroup=t,this.renderOrder=o.z.default,this.castShadow=d.ShouldCastShadow,this.onBeforeRender=(e,t,i,s,n,r)=>{this.updateUniforms(n,r)}}dispose(){this.reset()}reset(){this._chunks.length=0,this.geometry.dispose(),delete this.onBuild,delete this.onOpacityUpdate,this.built=!1}addChunk(e){-1===this._chunks.indexOf(e)&&this._chunks.push(e)}getChunk(e){return this._chunks[e]}build(){if(this.built)throw new Error("build() should only be called once");if(!this._chunks.length)return;const e=(0,r.qf)(this._chunks.map((e=>e.geometry)));e.clearGroups();let t=0;this.material=[],this._chunks.forEach(((i,s)=>{i.geometry&&i.geometry.index&&(e.addGroup(t,i.geometry.index.count,s),t+=i.geometry.index.count,i.geometry.dispose(),i.geometry=e,i.notifyOnMaterialUpdated((e=>{Array.isArray(this.material)&&(this.material[s]=e),this.onMaterialUpdate&&this.onMaterialUpdate()})),i.onOpacityUpdate=e=>{this.opacity=e})})),this.geometry=e,this.geometry.computeBoundingBox(),this.geometry.computeBoundingSphere(),this.material=this._chunks.map((e=>e.material)),this.size=this.boundingBox.getSize(this.size),this.center=this.boundingBox.getCenter(this.center),this.built=!0,this.onBuild&&this.onBuild()}buildWithSingleChunk(e){if(this.built)return;const{meshGroup:t,meshSubgroup:i,lod:s}=e;this.name=`RoomMesh:${s}-${t}-${i}-${e.chunkIndex}`,this.meshGroup=t,this.meshSubgroup=i,this._chunks.push(e),e.notifyOnMaterialUpdated((e=>{this.material=e,this.onMaterialUpdate&&this.onMaterialUpdate()})),e.onOpacityUpdate=e=>{this.opacity=e},this.size=this.boundingBox.getSize(this.size),this.center=this.boundingBox.getCenter(this.center),this.built=!0,this.onBuild&&this.onBuild()}updateUniforms(e,t){e instanceof s.RawShaderMaterial&&(t?this.chunks[t.materialIndex].onBeforeDraw(e):this.chunks.length&&this.chunks[0].onBeforeDraw(e))}get boundingBox(){return(0,r.A5)(this.geometry)}set opacity(e){e!==this.opacity&&(this._opacity=e,this.raycastEnabled=e>c.xx.FADE_CLICKABLE_THRESHOLD,this.renderOrder=e<c.xx.FADE_OPAQUE?o.z.ghostFloor:o.z.default,this.onOpacityUpdate&&this.onOpacityUpdate(e))}get opacity(){return this._opacity}get chunks(){return this._chunks}getSortKey(){return this.chunks.length?this._chunks[0].getSortKey():0}}d.ShouldCastShadow=!1},74094:(e,t,i)=>{"use strict";i.d(t,{u:()=>n});var s=i(56063);class n extends s.m{constructor(e=null){super(),this.payload={cursor:e}}}n.id="SET_MOUSE_CURSOR"},945:(e,t,i)=>{"use strict";var s;i.d(t,{C:()=>s}),function(e){e.NONE="none",e.DEFAULT="default",e.MOVE="move",e.MOVE_LF="col-resize",e.MOVE_UD="row-resize",e.XHAIR="crosshair",e.PLUS="cell",e.QUESTION="help",e.NOPE="not-allowed",e.FINGER="pointer",e.TEXT="text",e.TEXT_VERT="vertical-text",e.ZOOM_IN="zoom-in",e.ZOOM_OUT="zoom-in",e.GRAB="grab",e.GRABBING="grabbing",e.ARROW_R="e-resize",e.ARROW_L="w-resize",e.ARROW_U="n-resize",e.ARROW_D="s-resize",e.ARROW_UR="ne-resize",e.ARROW_UL="nw-resize",e.ARROW_DR="se-resize",e.ARROW_DL="sw-resize",e.ARROW_LR="ew-resize",e.ARROW_UD="ns-resize",e.ARROW_URDL="nesw-resize",e.ARROW_ULDR="nwse-resize",e.ROOMBOUNDS_DEFAULT="rbe-default",e.ROOMBOUNDS_MOVING="rbe-moving",e.ROOMBOUNDS_PLACE_NODE="rbe-place-node",e.ROOMBOUNDS_FINISH_ROOM="rbe-finish-room"}(s||(s={}))},35922:(e,t,i)=>{"use strict";i.d(t,{I:()=>n});var s=i(56063);class n extends s.m{constructor(e){super(),this.payload={roomAssociation:e}}}n.id="REGISTER_ROOM_ASSOCIATION_SOURCE"},73521:(e,t,i)=>{"use strict";i.d(t,{K:()=>o});var s=i(75287),n=i(32137),r=i(44303);const a=new s.v({});class o{constructor(e,t,i){this.commandBinder=e,this.layersData=t,this.dataTypeGroup=i,this.textParser=a,this.enabled=!0,this.bindings=[]}getGroupingId(e){switch(e){case r.HH.TYPE:return this.getTypeId();case r.HH.FLOOR:return this.getFloorId();case r.HH.ROOM:return this.getRoomId();case r.HH.LAYER:return this.getLayerGroupId();case r.HH.DATE:return this.dateBucket}}getFloorId(){return this.floorId}getRoomId(){return this.roomId}getDateBucket(){return this.dateBucket}getTypeId(){return this.typeId}supportsBatchDelete(){return!1}supportsLayeredCopyMove(){return!1}getLayerGroupId(){var e,t;const i=null===(e=this.layersData)||void 0===e?void 0:e.getBaseLayerId(),s=null===(t=this.layersData)||void 0===t?void 0:t.getViewLayerId();return this.layerId&&s&&this.layerId===i?s:this.layerId}isLayerVisible(){return!this.layersData||!this.layerId||this.layersData.layerVisible(this.layerId)}onSelect(e,t,i){this.commandBinder.issueCommand(new n.IL(this.id,this.typeId))}registerBindings(){}cancelBindings(){this.bindings.forEach((e=>e.cancel()))}}},32137:(e,t,i)=>{"use strict";i.d(t,{FZ:()=>r,H1:()=>n,Hf:()=>c,IL:()=>l,M8:()=>a,Mp:()=>d,Pe:()=>u,SN:()=>o,c6:()=>h});var s=i(56063);class n extends s.m{constructor(e){super(),this.payload={query:e}}}n.id="UPDATE_SEARCH_QUERY";class r extends s.m{constructor(e){super(),this.payload={keywords:e}}}r.id="UPDATE_SEARCH_QUERY_KEYWORDS";class a extends s.m{constructor(e){super(),this.payload={keywordId:e}}}a.id="TOGGLE_SEARCH_QUERY_KEYWORD";class o extends s.m{constructor(e){super(),this.payload={grouping:e}}}o.id="CHANGE_SEARCH_GROUPING";class c extends s.m{constructor(){super()}}c.id="SEARCH_FILTER_CLEAR";class d extends s.m{constructor(e,t){super(),this.payload={groupId:e,enabled:t}}}d.id="SEARCH_FILTER_TOGGLE";class l extends s.m{constructor(e,t){super(),this.payload={id:e,typeId:t}}}l.id="SELECT_SEARCH_RESULT";class h extends s.m{constructor(e){super(),this.payload=e}}h.id="SEARCH_GROUP_REGISTER";class u extends s.m{constructor(e){super(),this.payload={id:e}}}u.id="SEARCH_GROUP_DEREGISTER"},46199:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var s=i(16996),n=i(47149);const r=(0,s.M)(n.T,"query","")},26302:(e,t,i)=>{"use strict";i.d(t,{i:()=>n});var s=i(81396);class n extends s.Mesh{}},71835:(e,t,i)=>{"use strict";i.d(t,{Bv:()=>u,Dv:()=>c,TE:()=>d,l0:()=>h,o7:()=>l});var s=i(81396);const n=-1,r=10,a=5,o=-5,c=(e,t=n)=>i=>e.distanceToSquared(i.position)*t,d=(e,t=n)=>i=>e.distanceTo(i.position)*t,l=(e,t,i=r)=>{const n=new s.Vector3;return s=>n.copy(s.position).sub(e).normalize().dot(t)*i},h=(e,t=n)=>i=>e.distanceToSquared(i.floorPosition)*t,u=(e,t=a,i=o)=>s=>e===s.floorId?t:i},97957:(e,t,i)=>{"use strict";i.d(t,{E:()=>n});var s=i(81396);class n extends s.Mesh{constructor(e,t){super(e,t)}}},44724:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;vec3 closestPointToRay(vec3 point,vec3 origin,vec3 direction){vec3 d=point-origin;float D=dot(d,direction);return origin+D*direction;}vec3 rayIntersectsSphere(vec3 origin,float radius,vec3 rayOrigin,vec3 rayDirection){vec3 chordPoint=closestPointToRay(origin,rayOrigin,rayDirection);float D1=length(rayOrigin-chordPoint);float D=length(chordPoint-origin);float D2=sqrt(radius*radius-D*D);return rayOrigin+(D1+D2)*rayDirection;}uniform float opacity;uniform vec3 color;uniform sampler2D bg;varying vec2 vUv;void main(){vec4 bgColor=texture2D(bg,vUv);gl_FragColor=vec4(bgColor.rgb,bgColor.a*opacity);}"},52059:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;vec3 closestPointToRay(vec3 point,vec3 origin,vec3 direction){vec3 d=point-origin;float D=dot(d,direction);return origin+D*direction;}vec3 rayIntersectsSphere(vec3 origin,float radius,vec3 rayOrigin,vec3 rayDirection){vec3 chordPoint=closestPointToRay(origin,rayOrigin,rayDirection);float D1=length(rayOrigin-chordPoint);float D=length(chordPoint-origin);float D2=sqrt(radius*radius-D*D);return rayOrigin+(D1+D2)*rayDirection;}uniform vec3 diffuse;uniform float opacity;uniform sampler2D mask;\n#ifdef USE_DASH\nuniform float dashSize;uniform float gapSize;\n#endif\nvarying float vLineDistance;\n#include <common>\nvarying vec2 vUv;void main(){\n#ifdef USE_DASH\nif(vUv.y<-1.||vUv.y>1.)discard;if(mod(vLineDistance,dashSize+gapSize)>dashSize)discard;\n#endif\n#ifdef USE_MASK\nvec2 modUv=vec2(vUv);modUv*=2.;vec4 texelColor=texture2D(mask,modUv);gl_FragColor=vec4(texelColor.rgb,min(texelColor.a,opacity));\n#else\ngl_FragColor=vec4(diffuse,opacity);\n#endif\n}"},7188:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;\n#include <common>\nuniform float linewidth;uniform vec2 resolution;attribute vec3 instanceStart;attribute vec3 instanceEnd;attribute vec3 instanceColorStart;attribute vec3 instanceColorEnd;varying vec2 vUv;\n#ifdef USE_DASH\nuniform float dashScale;attribute float instanceDistanceStart;attribute float instanceDistanceEnd;varying float vLineDistance;\n#endif\nvoid trimSegment(const in vec4 start,inout vec4 end){float a=projectionMatrix[2][2];float b=projectionMatrix[3][2];float nearEstimate=-0.5*b/a;float alpha=(nearEstimate-start.z)/(end.z-start.z);end.xyz=mix(start.xyz,end.xyz,alpha);}void main(){\n#ifdef USE_COLOR\nvColor.xyz=(position.y<0.5)?instanceColorStart:instanceColorEnd;\n#endif\n#ifdef USE_DASH\nvLineDistance=(position.y<0.5)?dashScale*instanceDistanceStart:dashScale*instanceDistanceEnd;\n#endif\nfloat aspect=resolution.x/resolution.y;vUv=uv;vec4 start=modelViewMatrix*vec4(instanceStart,1.);vec4 end=modelViewMatrix*vec4(instanceEnd,1.);bool perspective=(projectionMatrix[2][3]==-1.);if(perspective){if(start.z<0.&&end.z>=0.){trimSegment(start,end);}else if(end.z<0.&&start.z>=0.){trimSegment(end,start);}}vec4 clipStart=projectionMatrix*start;vec4 clipEnd=projectionMatrix*end;vec2 ndcStart=clipStart.xy/clipStart.w;vec2 ndcEnd=clipEnd.xy/clipEnd.w;vec2 dir=ndcEnd-ndcStart;dir.x*=aspect;dir=normalize(dir);vec2 offset=vec2(dir.y,-dir.x);dir.x/=aspect;offset.x/=aspect;if(position.x<0.)offset*=-1.;offset*=linewidth;offset/=resolution.y;vec4 clip=(position.y<0.5)?clipStart:clipEnd;\n#ifdef USE_MASK\noffset*=(clipEnd.w+clipStart.w)*0.5;\n#else\noffset*=clip.w;\n#endif\nclip.xy+=offset;gl_Position=clip;\n#include <worldpos_vertex>\n}"},56449:e=>{e.exports="precision highp float;uniform vec3 color;uniform float antialiasWidth;uniform float lineWidth;uniform float dashed;uniform float dashSize;uniform float gapSize;uniform float globalOpacity;varying float vDistanceFromAxis;varying float vDistanceAlong;varying float vOpacity;\n#ifdef FADE_DISTANCE_FROM_CAMERA\nvarying float vDistanceFromCamera;\n#endif\nvoid main(){float halfWidth=lineWidth*0.5;float antialiasing=1.-smoothstep(halfWidth,halfWidth+antialiasWidth,vDistanceFromAxis);float dashOpacity=1.;float cameraDistanceFadeOpacity=1.;if(dashed>0.){\n#ifdef WORLDSPACE_DASH\nfloat dashAA=fwidth(vDistanceAlong)*antialiasWidth*0.5;\n#else\nfloat dashAA=antialiasWidth*0.5;\n#endif\nfloat dashT=mod(vDistanceAlong,dashSize+gapSize);dashOpacity=smoothstep(0.,dashAA,dashT)*(1.-smoothstep(dashSize-dashAA,dashSize,dashT));}\n#ifdef FADE_DISTANCE_FROM_CAMERA\nfloat fadeStartDist=FADE_DISTANCE_FROM_CAMERA-1.;float fadeEndFist=FADE_DISTANCE_FROM_CAMERA+1.;float fadeT=clamp((vDistanceFromCamera-fadeStartDist)/(fadeEndFist-fadeStartDist),0.,1.);cameraDistanceFadeOpacity=1.-mix(0.,1.,fadeT);\n#endif\ngl_FragColor=vec4(color,globalOpacity*dashOpacity*antialiasing*vOpacity*cameraDistanceFadeOpacity);}"},75215:e=>{e.exports="precision highp float;uniform vec2 screenSize;vec2 rotate90(vec2 v){return vec2(-v.y,v.x);}vec2 ndcToScreen(vec4 pt){return(vec2(pt.x,pt.y)+vec2(1.,1.))*screenSize/2.;}vec2 screenToNdc(vec2 pt){return(pt*2./screenSize)-vec2(1.,1.);}uniform float lineWidth;uniform float antialiasWidth;uniform mat4 projectionMatrix;uniform mat4 modelViewMatrix;attribute float offsetDirection;attribute vec3 start;attribute vec3 end;attribute float t;attribute float opacity;varying float vDistanceFromAxis;varying float vDistanceAlong;varying float vOpacity;\n#ifdef FADE_DISTANCE_FROM_CAMERA\nvarying float vDistanceFromCamera;uniform vec3 cameraPos;\n#endif\nvoid main(){vOpacity=opacity;vec4 startNdc=projectionMatrix*modelViewMatrix*vec4(start,1.);vec4 endNdc=projectionMatrix*modelViewMatrix*vec4(end,1.);vec2 startScreen=ndcToScreen(startNdc/startNdc.w);vec2 endScreen=ndcToScreen(endNdc/endNdc.w);float halfWidth=lineWidth*0.5+antialiasWidth;vec2 directionScreen=endScreen-startScreen;vec2 widthOffsetScreen=rotate90(normalize(directionScreen))*offsetDirection*halfWidth;vec2 centerlinePos=startScreen+directionScreen*t;vec2 position=centerlinePos+widthOffsetScreen*1.3;\n#ifdef FADE_DISTANCE_FROM_CAMERA\nvec3 worldPos=start+(end-start)*t;vDistanceFromCamera=length(worldPos-cameraPos);\n#endif\nvDistanceFromAxis=length(widthOffsetScreen);float clippedT=length(centerlinePos-startScreen)/length(directionScreen);\n#ifdef WORLDSPACE_DASH\nvDistanceAlong=length((end-start)*clippedT);\n#else\nvDistanceAlong=length(directionScreen*clippedT);\n#endif\nfloat z=mix(startNdc.z,endNdc.z,clippedT);float w=mix(startNdc.w,endNdc.w,clippedT);vec2 posNdc=screenToNdc(position);gl_Position=vec4(posNdc*w,z,w);}"}}]);